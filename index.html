<!DOCTYPE html>
<html ng-app="angularApp">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=deivice-width, initial-scale=1"/>

    <title>Pellego | Task 1 | FlexBox</title>

    <link rel="stylesheet" type="text/css" href="styles/main.css"/>

    <script src="scripts/angular.min.js"></script>
    <script src="scripts/angularApp.js"></script>
</head>

<body ng-controller="CardController">

<header>
    <div class="header_main_container">
        <div class="header_image">
            <img src="images/pellego.png">
        </div>
        <div class="header_center">
            <h1> movie collection </h1>
        </div>
        <div class="header_right">
            <div class="navLinks" ng-repeat="card in navCards">
                <a href="#" class="navLink">{{card.page}}</a>
            </div>
        </div>
    </div>

</header>

<div class="parent">
    <!--
    Choo choo! Last stop on the train to the electric castle!!
    If you didn't already notice, this comment shouldn't be read first. Start on line 95 of this file.
    Here it is: the magical line that sorts your data model. ng-repeat has a syntax that allows you to not only repeat
    a DOM structure for every single item in an iterable (remember iterables are things like objects or arrays
    that you could iterate over in code using "for" loops), but there are some more advanced things you can have it do
    *right before* it spits all that data out -- you can run filters! Check out the Angular docs for more on filters,
    but you can get the gist of it here -- moving away from the standard ng-repeat="someItem in someIterable" syntax,
    there's this new "| orderBy: sorting" thing at the end of the expression.
    orderBy does exactly what it sounds like - it will sort the iterable item by the property you give it, assuming that
    every item in the iterable has that property.
    So, in this case, angular reads your ng-repeat expression *from right to left*, like this:
    First, take "movieCards" and put it in order based on the *property name* that matches whatever my $scope.sorting
    value is currently set to. Then, for each "card" in "movieCards", spit them all out!

    Hope this helps!
    -->
    <div id="card" class="item" ng-repeat="card in movieCards | orderBy: sorting" ng-hide="card.hidden">
        <div class="inner_item">
            <div class="movie_content">
                <p>Movie {{$index + 1}} : {{card.title}}</p>
                <p class="director">Director: {{card.director}}</p>
                <p>Genre(s):</p><p ng-repeat="innerCard in card.genre"> {{innerCard}} </p>
            </div>
            </div>
            <div class="removeBox">
                <button ng-click="card.hidden=true">Hide Movie Card</button>
            </div>
        </div>
    </div>
</div>


<br/><br/>

<div class="bottomHalf">

    <div>
        <h2 class="title"> Restore hidden cards</h2>
        <p>
            Click on the "show" link to see all cards.
        </p>
        <button ng-click="showAllMovies()">
            Show
        </button>
    </div>

    <br/><br/>

    <h2 class="title">add a new movie card</h2>
    <div>
        <form ng-submit="addNewMovie()">
            <input type="text" placeholder="Enter Title" ng-model="newMovie.title">
            <input type="text" placeholder="Enter Director" ng-model="newMovie.director">
                <form ng-submit="addGenre()">
                    <input type="text" placeholder="Enter Genre">
                    <button type="submit">Add Genres</button>
                </form>

            <button type="submit">Add</button>
        </form>
    </div>


    <form ng-submit="addGenre()">
        <input type="text" placeholder="Enter Genre">
        <button type="submit">Add Genres</button>
    </form>

    <br/><br/>

<!--- I don't understand how this works --- how it connects to the form function and then how it connects in the correct scope to the movieCards-->
    <!--
    ng-click is an *event handler*. Angular automatically attaches a click even listener to whatever element has an ng-click
    attribute on it. An event listener is a specific object that, once it detects the event it is assigned to listen to, calls
     its 'handler' function. In this case, ng-click will call the sortBy function on your parent scope, passing it the string
     that is hard-coded (i.e. 'director', 'title', or 'genre') that is in the markup here.
     Now, go to the sortBy function for further explanation.
    -->
    <div>
        <h2 class="title"> sort by genre </h2>
        <button class="button" ng-click="sortBy('director')">
            director
        </button>
        <button class="button" ng-click="sortBy('title')">
           title
        </button>
        <button class="button" ng-click="sortBy('genre')">
           genre
        </button>
    </div>



    <br/><br/><br/><br/>

    <h2 class="title"> show certain genres</h2>

    <br/>
    <!--- display only one genre at a time-->

    <button ng-repeat= "genre in genreCards" class="button" ng-click="showGenreMovies(genre.name)"> <!-- show buttons of genre possibilities and sort on click -->
        show {{genre.name}} movies
    </button>
</div>


<p ng-repeat= "fruit in fruits"> <!-- show buttons of genre possibilities and sort on click -->
    show {{genre.name}} movies
</p>


</body>
</html>